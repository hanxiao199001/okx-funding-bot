# OKX资金费率套利交易系统

🤖 基于资金费率的自动化加密货币套利策略

## 📊 项目概述

本项目是一个完整的量化交易系统，实现了：
- 实时数据采集
- 策略信号生成
- 纸面交易模拟
- 数据可视化
- 风险控制

**策略类型**：资金费率套利（保守型）  
**目标收益**：月5-10%  
**初始资金**：50 USDT  
**开发周期**：7天冲刺

---

## ✅ 已完成功能（Day1）

### 1. 数据采集系统
- ✅ 每5分钟自动采集BTC价格、资金费率、持仓量
- ✅ 数据持久化保存（CSV格式）
- ✅ 后台稳定运行
- 📊 **当前数据量**：174条（16小时）

### 2. 策略引擎
- ✅ 资金费率套利策略
- ✅ 自动信号检测
- ✅ 止盈止损机制
- 🎯 **策略参数**：
  - 做空阈值：0.5%
  - 做多阈值：-0.3%
  - 止盈：+1.5%
  - 止损：-2%

### 3. 纸面交易系统
- ✅ 模拟真实交易
- ✅ 仓位管理
- ✅ 状态持久化
- 💼 **当前持仓**：空仓（$91,009开仓）

### 4. 监控系统
- ✅ 实时仪表盘
- ✅ 系统健康检查
- ✅ 策略统计分析

### 5. 数据可视化
- ✅ 资金费率走势图
- ✅ 价格对比图
- ✅ 策略信号图
- ✅ 持仓量趋势图

---

## 🚀 快速开始

### 环境准备
```bash
# 1. 创建虚拟环境
python3 -m venv venv
source venv/bin/activate

# 2. 安装依赖
pip install requests pandas matplotlib schedule
```

### 启动系统
```bash
# 1. 启动数据采集（后台运行）
nohup python okx_crawler.py > crawler.log 2>&1 &

# 2. 启动纸面交易（后台运行）
nohup python paper_bot.py loop > paper_bot.log 2>&1 &

# 3. 查看实时仪表盘
python dashboard.py

# 4. 生成可视化图表
python visualize.py
```

---

## 📂 项目结构
```
okx-funding-bot/
├── okx_crawler.py          # 数据采集爬虫
├── paper_bot.py            # 纸面交易机器人
├── dashboard.py            # 实时监控仪表盘
├── visualize.py            # 数据可视化
├── monitor_signals.py      # 实时信号监控
├── funding_strategy.py     # 策略回测
├── okx_btc_data.csv        # 历史数据
├── paper_state.json        # 交易状态
└── *.png                   # 可视化图表
```

---

## 📈 策略说明

### 核心逻辑

**资金费率套利**：利用永续合约资金费率的波动进行套利

- 当资金费率 > 0.5%：开空单（多头付费给空头）
- 当资金费率 < -0.3%：开多单（空头付费给多头）
- 当费率回归中性或达到止盈/止损：平仓

### 风控机制

- 单次开仓：账户30%
- 止盈线：+1.5%
- 止损线：-2%
- 杠杆：1x（保守）

---

## 📊 数据统计（截至Day1）

### 市场数据
- 数据时间跨度：16.2小时
- 价格区间：$90,860 - $93,316
- 价格波动率：2.65%
- 平均资金费率：0.49%

### 策略表现
- 做空信号频率：45.9%
- 做多信号频率：0%
- 当前持仓：空仓（开仓价$91,009）

---

## 🗓️ 开发计划

### Day1 ✅（2026-01-19）
- [x] 数据采集系统
- [x] 策略开发
- [x] 纸面交易
- [x] 监控仪表盘
- [x] 数据可视化

### Day2-3（数据积累+策略优化）
- [ ] 收集48小时数据
- [ ] 参数优化
- [ ] 回测验证
- [ ] API对接测试

### Day4-5（实盘准备）
- [ ] 风控系统完善
- [ ] 小额实盘测试（1-5 USDT）
- [ ] 异常处理
- [ ] 监控报警

### Day6-7（正式运行）
- [ ] 10-50 USDT实盘
- [ ] 性能监控
- [ ] 策略迭代
- [ ] 文档完善

---

## ⚠️ 风险提示

1. 本项目仅供学习研究，不构成投资建议
2. 加密货币交易存在高风险，可能导致本金损失
3. 实盘交易前请充分测试和评估风险
4. 建议从小额资金开始

---

## 🛠️ 技术栈

- Python 3.x
- Pandas - 数据处理
- Matplotlib - 数据可视化
- Requests - API调用
- Schedule - 定时任务

---

## 📞 联系方式

GitHub: [@hanxiao199001](https://github.com/hanxiao199001)

---

## 📄 许可证

MIT License
